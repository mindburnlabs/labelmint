# Production Environment Configuration
# Copy this to .env.production and update with your actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Database
DB_HOST=your-db-host.com
DB_PORT=5432
DB_NAME=labelmint_production
DB_USER=labelmint_user
DB_PASSWORD=your-secure-password-here
DB_SSL=true
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=5000
DB_STATEMENT_TIMEOUT=30000
DB_QUERY_TIMEOUT=30000

# Redis Cache
REDIS_HOST=your-redis-host.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_KEY_PREFIX=labelmint:prod:

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3000

# Frontend URLs
FRONTEND_URL=https://labelmint.it
CORS_ORIGIN=https://labelmint.it,https://app.labelmint.it

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Secrets (generate secure random strings)
JWT_SECRET=your-super-secure-jwt-secret-at-least-256-characters
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-at-least-256-characters

# Email Verification
EMAIL_VERIFICATION_SECRET=your-email-verification-secret-256-chars

# Password Reset
PASSWORD_RESET_SECRET=your-password-reset-secret-256-chars

# Session Management
SESSION_SECRET=your-session-secret-at-least-256-characters
SESSION_EXPIRES_IN=24h

# Two-Factor Authentication
TWO_FACTOR_SECRET=your-2fa-secret-256-chars

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
# SMTP Settings
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-smtp-username
SMTP_PASS=your-smtp-password
SMTP_FROM=noreply@labelmint.it

# Email Rate Limiting
SMTP_MAX_CONNECTIONS=50
SMTP_MAX_MESSAGES=5000
SMTP_RATE_DELTA=1000
SMTP_RATE_LIMIT=10

# DKIM (optional but recommended)
DKIM_DOMAIN=labelmint.it
DKIM_SELECTOR=mail
DKIM_PRIVATE_KEY=path/to/your/private.key

# =============================================================================
# TON BLOCKCHAIN CONFIGURATION
# =============================================================================
TON_NETWORK=mainnet

# TON RPC Endpoints
TON_MAINNET_RPC=https://toncenter.com/api/v2/jsonRPC
TON_TESTNET_RPC=https://testnet.toncenter.com/api/v2/jsonRPC

# USDT Contract Addresses
USDT_MAINNET_CONTRACT=EQCxE6mUtQJKFnGfaROatlOtTxW1QbGwLU-lydI
USDT_TESTNET_CONTRACT=EQBJXfB_dhBn1P5O3uy7Suo4QbGwLU-lWj_H

# Gas Settings
TON_GAS_FEE_ESTIMATE=0.005
TON_MAX_GAS_FEE=0.1
TON_DEFAULT_TIMEOUT=30000

# Transaction Monitoring
TON_MONITORING_INTERVAL=15000
TON_MAX_RETRIES=30
TON_BATCH_SIZE=20

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================
# AWS S3 (or MinIO) Settings
AWS_REGION=us-east-1
AWS_S3_BUCKET=labelmint-production-files
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_S3_ENDPOINT=  # For MinIO, e.g., https://minio.your-domain.com

# Local File Storage (alternative)
STORAGE_TYPE=s3  # s3 or local
UPLOAD_DIR=/var/www/uploads

# File Validation
MAX_FILE_SIZE=104857600  # 100MB
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp,image/svg+xml,application/pdf,text/plain
BLOCKED_EXTENSIONS=.exe,.bat,.cmd,.com,.pif,.scr,.vbs,.js,.jar,.php,.asp,.sh

# Image Processing
IMAGE_PROCESSING_ENABLED=true
AUTO_OPTIMIZE_IMAGES=true
GENERATE_THUMBNAILS=true
THUMBNAIL_SIZES=150,300,600

# Virus Scanning
VIRUS_SCANNER_ENABLED=true
CLAMAV_HOST=localhost
CLAMAV_PORT=3310
CLAMAV_SOCKET_PATH=/var/run/clamav/clamd.sock
CLAMAV_MAX_FILE_SIZE=104857600

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
RATE_LIMIT_WINDOW=900000  # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_BLOCK_DURATION=3600000  # 1 hour in milliseconds

# Rate Limiting Rules
RATE_LIMIT_AUTH=20/minute
RATE_LIMIT_EMAIL_VERIFY=5/hour
RATE_LIMIT_PASSWORD_RESET=3/hour
RATE_LIMIT_FILE_UPLOAD=10/minute
RATE_LIMIT_PAYMENT=30/minute

# =============================================================================
# MONITORING & LOGGING CONFIGURATION
# =============================================================================
# Application Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/labelmint/app.log
LOG_MAX_FILE_SIZE=100MB

# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=1.0.0

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Feature Toggle Configuration
FEATURE_TON_PAYMENTS=true
FEATURE_WEBSOCKETS=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_VIRUS_SCANNING=true
FEATURE_RATE_LIMITING=true
FEATURE_TWO_FACTOR_AUTH=true

# Beta Features
FEATURE_CONSENSUS_AI=false
FEATURE_ANALYTICS_DASHBOARD=false

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Database Backups
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
DB_BACKUP_RETENTION=30
DB_BACKUP_S3_BUCKET=labelmint-backups

# File Backups
FILE_BACKUP_ENABLED=true
FILE_BACKUP_SCHEDULE=0 3 * * *  # Daily at 3 AM
FILE_BACKUP_RETENTION=90

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_RATE_LIMIT_PER_MINUTE=1000
API_TIMEOUT=30000
API_MAX_PAYLOAD_SIZE=10485760

# API Keys
API_KEY_EXPIRES_IN=365
API_KEYS_PER_USER=10

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
# Webhook Security
WEBHOOK_SECRET=your-webhook-signing-secret-256-chars
WEBHOOK_TIMEOUT=10000

# Webhook URLs
PAYMENT_WEBHOOK_URL=https://labelmint.it/api/webhooks/payment
TASK_WEBHOOK_URL=https://labelmint.it/api/webhooks/tasks

# Retry Policy
WEBHOOK_MAX_RETRIES=5
WEBHOOK_RETRY_DELAY=1000
WEBHOOK_RETRY_BACKOFF=2

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Caching
CACHE_DEFAULT_TTL=300
CACHE_USER_SESSION_TTL=1800
CACHE_API_RESPONSE_TTL=60

# Database Pool
DB_POOL_WARMUP=true
DB_POOL_MAX_QUERIES=100

# Load Balancing
LOAD_BALANCER_ROUNING_ROBIN=true
LOAD_BALANCER_STICKY_SESSIONS=true

# =============================================================================
# GDPR & COMPLIANCE
# =============================================================================
# Data Anonymization
DATA_ANONYMIZATION_ENABLED=true
DATA_RETENTION_DAYS=730

# Cookie Settings
COOKIE_SECURE=true
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=strict

# Data Export
DATA_EXPORT_FORMAT=csv
DATA_EXPORT_MAX_RECORDS=10000

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================
# Horizontal Scaling
SCALE_MODE=multi
NODES=3

# Autoscaling
AUTOSCALING_ENABLED=true
AUTOSCALING_MIN_INSTANCES=2
AUTOSCALING_MAX_INSTANCES=10
AUTOSCALING_TARGET_CPU=70
AUTOSCALING_TARGET_MEMORY=80

# =============================================================================
# MESSAGING QUEUE CONFIGURATION
# =============================================================================
# Background Jobs
JOB_QUEUE_ENABLED=true
JOB_QUEUE_CONCURRENCY=10

# Email Queue
EMAIL_QUEUE_RETRY_DELAY=5000
EMAIL_QUEUE_MAX_ATTEMPTS=5

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# HTTPS Certificate
SSL_CERT_PATH=/etc/ssl/certs/labelmint.crt
SSL_KEY_PATH=/etc/ssl/private/labelmint.key

# TLS Version
TLS_MIN_VERSION=1.2
TLS_CIPHER_SUITE=ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256

# HSTS
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true