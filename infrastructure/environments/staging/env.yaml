# Staging Environment Configuration
namespace: labelmint-staging
environment: staging

common:
  domain: staging.labelmint.com
  cluster: labelmint-staging-cluster
  region: us-west-2

# Application configurations
apps:
  frontend:
    replicas: 2
    image:
      repository: ghcr.io/labelmint/labelmint/frontend
      tag: develop
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 250m
        memory: 256Mi
    autoscaling:
      minReplicas: 2
      maxReplicas: 5
      targetCPUUtilizationPercentage: 80

  backend:
    replicas: 2
    image:
      repository: ghcr.io/labelmint/labelmint/backend
      tag: develop
    resources:
      requests:
        cpu: 250m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
    autoscaling:
      minReplicas: 2
      maxReplicas: 5
      targetCPUUtilizationPercentage: 80

  workers:
    replicas: 1
    image:
      repository: ghcr.io/labelmint/labelmint/workers
      tag: develop
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 250m
        memory: 256Mi

# Database configurations
databases:
  postgres:
    instanceClass: db.t3.medium
    storage: 20Gi
    storageType: gp2
    backupRetention: 7
    multiAZ: false
    encryption: true

  redis:
    nodeType: cache.t3.micro
    numShards: 1
    replicationGroup: false
    encryption: true

# Monitoring and observability
monitoring:
  enabled: true
  prometheus:
    retention: 7d
    storage: 10Gi
  grafana:
    enabled: true
  loki:
    enabled: true
    retention: 3d
    storage: 10Gi
  tempo:
    enabled: true
    retention: 3d
    storage: 5Gi

# Ingress configuration
ingress:
  class: nginx
  tls:
    enabled: true
    certManager: true
  rateLimit:
    enabled: true
    average: 50
    burst: 100

# Security settings
security:
  podSecurityPolicy: false
  networkPolicy: true
  rbac: true
  secretsManager: env
  imagePullPolicy: Always

# Backup configuration
backup:
  enabled: false
  schedule: "0 3 * * *"
  retention: 7d
  storageClass: standard
  destination: s3://labelmint-backups/staging