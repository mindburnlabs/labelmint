# Production Environment Configuration
namespace: labelmint-prod
environment: production

common:
  domain: labelmint.com
  cluster: labelmint-prod-cluster
  region: us-west-2

# Application configurations
apps:
  frontend:
    replicas: 5
    image:
      repository: ghcr.io/labelmint/labelmint/frontend
      tag: latest
    resources:
      requests:
        cpu: 200m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
    autoscaling:
      minReplicas: 5
      maxReplicas: 20
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

  backend:
    replicas: 3
    image:
      repository: ghcr.io/labelmint/labelmint/backend
      tag: latest
    resources:
      requests:
        cpu: 500m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi
    autoscaling:
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 70
      targetMemoryUtilizationPercentage: 80

  workers:
    replicas: 3
    image:
      repository: ghcr.io/labelmint/labelmint/workers
      tag: latest
    resources:
      requests:
        cpu: 250m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi
    autoscaling:
      minReplicas: 3
      maxReplicas: 10
      targetCPUUtilizationPercentage: 80

# Database configurations
databases:
  postgres:
    instanceClass: db.m5.large
    storage: 100Gi
    storageType: gp3
    backupRetention: 30
    multiAZ: true
    encryption: true

  redis:
    nodeType: cache.m5.large
    numShards: 2
    replicationGroup: true
    automaticFailover: true
    encryption: true
    atRestEncryption: true

# Monitoring and observability
monitoring:
  enabled: true
  prometheus:
    retention: 30d
    storage: 50Gi
  grafana:
    enabled: true
    persistence: 10Gi
  loki:
    enabled: true
    retention: 14d
    storage: 100Gi
  tempo:
    enabled: true
    retention: 7d
    storage: 50Gi

# Ingress configuration
ingress:
  class: nginx
  tls:
    enabled: true
    certManager: true
  rateLimit:
    enabled: true
    average: 100
    burst: 200

# Security settings
security:
  podSecurityPolicy: true
  networkPolicy: true
  rbac: true
  secretsManager: vault
  imagePullPolicy: Always

# Backup configuration
backup:
  enabled: true
  schedule: "0 2 * * *"
  retention: 30d
  storageClass: fast-ssd
  destination: s3://labelmint-backups/prod